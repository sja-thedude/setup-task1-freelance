'use client'

import style from 'public/assets/css/self-service.module.scss'
import { useI18n } from '@/locales/client'
import { useRouter } from "next/navigation";
import { useAppSelector } from '@/redux/hooks'
import { useGetWorkspaceDataByIdQuery } from '@/redux/services/workspace/workspaceDataApi'
import { useAppDispatch } from '@/redux/hooks'
import { addStepSelfOrdering, selfOrderingChangeInCart, addInfoSelfOrder, rootCartTotalDiscountSelf,
    selfOrderingCartNote, rootCartValidCouponProductIdsSelf, addCouponToCartSelf } from '@/redux/slices/cartSlice'
import variables from '/public/assets/css/intro-table.module.scss'
import { hexToRgb } from "@/utils/rgb";
import IntroBackground from '@/app/[locale]/components/share/introBackground';
export default function Successed() {
    // Get workspace info
    const workspaceId = useAppSelector((state) => state.workspaceData.globalWorkspaceId)
    const { data: apiDataToken } = useGetWorkspaceDataByIdQuery({id: workspaceId})
    const apiData = apiDataToken?.data?.setting_generals;
    const color = useAppSelector((state) => state.workspaceData.globalWorkspaceColor)
    const trans = useI18n();
    const router = useRouter();
    let rgbColor = hexToRgb('#FFFFFF')

    if (color) {
        rgbColor = hexToRgb(color);
    }

    const dispatch = useAppDispatch();
    dispatch(selfOrderingChangeInCart([]));
    dispatch(addInfoSelfOrder(null));
    dispatch(rootCartTotalDiscountSelf(null));
    dispatch(selfOrderingCartNote(null));
    dispatch(addCouponToCartSelf(null));
    dispatch(rootCartValidCouponProductIdsSelf(null));
    dispatch(addStepSelfOrdering(1))

    return (
        <>
            <div style={{ display: 'block' }}>
                <IntroBackground position="top" color={color} rgbColor={rgbColor}/>
                <div className={`${variables.heying} heying row  text-center justify-content-center ps-2 pe-2`}>
                    <div className={`row justify-content-center ${variables.table_ordering_notfound}`}>
                        <div className="col-sm-12 col-xs-12">
                            <div className={`${style['icon-confirmation']}`}>
                                <svg width="135" height="123" viewBox="0 0 135 123" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M56.5931 28.5853C56.9719 28.9596 57.4293 29.2459 57.932 29.4237C58.4289 29.615 58.962 29.6967 59.4936 29.6632H63.6987V38.2183C65.0201 38.2183 66.3418 38.0987 67.6632 38.0987C68.985 38.0987 70.0832 38.0987 71.3017 38.2183V29.6632H75.4726C76.0013 29.6883 76.5297 29.6057 77.0257 29.4203C77.5212 29.235 77.9739 28.9509 78.356 28.5853C78.7473 28.2204 79.0575 27.7773 79.2653 27.2849C79.4699 26.7971 79.5749 26.2737 79.5745 25.745C79.5763 25.2162 79.4713 24.6925 79.2653 24.2051C79.0575 23.7127 78.7473 23.2696 78.356 22.9047C77.9739 22.5391 77.5212 22.255 77.0257 22.0697C76.5297 21.8843 76.0013 21.8017 75.4726 21.8268H59.4936C58.962 21.7933 58.4289 21.875 57.932 22.0663C57.4293 22.2441 56.9719 22.5304 56.5931 22.9047C56.2014 23.2696 55.8915 23.7127 55.6834 24.2051C55.4777 24.6925 55.3727 25.2162 55.3745 25.745C55.3742 26.2737 55.4792 26.7971 55.6834 27.2849C55.8915 27.7773 56.2014 28.2204 56.5931 28.5853Z" fill={color}/>
                                    <path d="M92.1023 14.8809C92.9713 14.8804 93.8049 14.5357 94.419 13.9227L102.812 5.55586C103.424 4.94552 103.768 4.1177 103.768 3.25455C103.768 2.39139 103.424 1.56358 102.812 0.953236C102.2 0.342889 101.369 3.57032e-08 100.504 0C99.6378 0 98.8073 0.342889 98.195 0.953236L89.8023 9.32009C89.3513 9.77694 89.0447 10.356 88.9211 10.9852C88.7976 11.6145 88.8626 12.266 89.1075 12.8588C89.3528 13.4515 89.7673 13.9593 90.3 14.3189C90.8323 14.6784 91.4593 14.8739 92.1023 14.8809Z" fill={color}/>
                                    <path d="M95.9818 34.5749C95.9865 35.4387 96.3338 36.2657 96.9483 36.8747C97.5624 37.4838 98.3936 37.8259 99.2601 37.8259H111.12C111.985 37.8259 112.814 37.4835 113.426 36.8737C114.037 36.2639 114.381 35.4371 114.381 34.5749C114.381 33.7127 114.037 32.8858 113.426 32.2761C112.814 31.6665 111.985 31.324 111.12 31.324H99.2601C98.3936 31.324 97.5624 31.6659 96.9483 32.2751C96.3338 32.8843 95.9865 33.7111 95.9818 34.5749Z" fill={color}/>
                                    <path d="M24.051 37.8427H35.9109C36.36 37.8752 36.8113 37.8152 37.2362 37.666C37.661 37.5171 38.0506 37.2822 38.3805 36.9762C38.7104 36.6706 38.9735 36.3 39.1531 35.8883C39.333 35.4767 39.4258 35.0324 39.4258 34.5834C39.4258 34.1343 39.333 33.69 39.1531 33.2783C38.9735 32.8666 38.7104 32.4963 38.3805 32.1904C38.0506 31.8846 37.661 31.6498 37.2362 31.5007C36.8113 31.3516 36.36 31.2914 35.9109 31.3239H24.051C23.6018 31.2914 23.1506 31.3516 22.7257 31.5007C22.3008 31.6498 21.9113 31.8846 21.5814 32.1904C21.2515 32.4963 20.9887 32.8666 20.8088 33.2783C20.6288 33.69 20.536 34.1343 20.536 34.5834C20.536 35.0324 20.6288 35.4767 20.8088 35.8883C20.9887 36.3 21.2515 36.6706 21.5814 36.9762C21.9113 37.2822 22.3008 37.5171 22.7257 37.666C23.1506 37.8152 23.6018 37.8752 24.051 37.8427Z" fill={color}/>
                                    <path d="M40.5282 13.9227C41.1426 14.5357 41.9759 14.8804 42.8453 14.8809C43.4883 14.8739 44.1153 14.6784 44.6476 14.3189C45.1803 13.9593 45.5948 13.4515 45.8401 12.8588C46.085 12.266 46.15 11.6145 46.0264 10.9852C45.9029 10.356 45.5962 9.77694 45.1449 9.32009L36.7697 0.953236C36.4666 0.651023 36.1067 0.411294 35.7104 0.247738C35.3144 0.0841815 34.8899 3.57032e-08 34.4611 0C34.0323 0 33.6078 0.0841816 33.2119 0.247738C32.8156 0.411294 32.4557 0.651023 32.1525 0.953236C31.8494 1.25545 31.6091 1.61423 31.4449 2.00909C31.281 2.40395 31.1964 2.82716 31.1964 3.25455C31.1964 3.68195 31.281 4.10517 31.4449 4.50001C31.6091 4.89489 31.8494 5.25367 32.1525 5.55586L40.5282 13.9227Z" fill={color}/>
                                    <path d="M130.96 111.331H72.9835V103.802H130.119C129.999 101.835 129.793 99.8673 129.484 97.9168C129.175 95.966 128.78 94.0326 128.3 92.1336C127.819 90.2342 127.236 88.3351 126.583 86.47C125.931 84.6049 125.159 82.7911 124.335 80.9949C123.511 79.1983 122.619 77.4699 121.572 75.7762C120.525 74.0821 119.478 72.354 118.328 70.8142C117.178 69.2743 115.942 67.683 114.638 66.1945C113.333 64.7061 111.96 63.2858 110.519 61.9341C109.077 60.5823 107.584 59.2992 106.022 58.0842C104.46 56.8696 102.847 55.7403 101.182 54.6624C99.5174 53.5842 97.7494 52.6091 96.0331 51.7194C94.3169 50.8297 92.4632 50.0081 90.627 49.2726C88.7904 48.5368 86.9367 47.9038 85.0319 47.339C83.1268 46.7745 81.2217 46.3296 79.2823 45.9533C77.3429 45.5766 75.3863 45.286 73.4123 45.0975C71.4386 44.9094 69.465 44.8069 67.4913 44.8069C65.5176 44.8069 63.5264 44.8922 61.5528 45.0804C59.5777 45.2521 57.6126 45.5263 55.666 45.9019C53.7266 46.2611 51.8044 46.7231 49.8993 47.2708C47.9913 47.8142 46.1126 48.454 44.2696 49.187C42.4334 49.9057 40.6139 50.7268 38.8463 51.6166C37.0811 52.5106 35.3627 53.4928 33.6972 54.5596C31.9809 55.6203 30.4021 56.7496 28.823 57.9817C27.2442 59.2135 25.7507 60.4795 24.309 61.8312C22.8673 63.183 21.4945 64.6032 20.1728 66.0917C18.8514 67.5805 17.6329 69.1204 16.4657 70.7288C14.1447 73.9582 12.1278 77.395 10.4415 80.9949C9.60037 82.7058 8.84524 84.6049 8.1758 86.47C7.50673 88.3351 6.94012 90.2171 6.45956 92.1507C5.97899 94.0841 5.56697 96.0003 5.25814 97.9511C4.94931 99.9015 4.7433 101.869 4.64047 103.854H60.5231V111.382H3.98817C3.56081 111.382 3.13738 111.467 2.74286 111.63C2.34798 111.794 1.98987 112.033 1.68818 112.336C1.38684 112.638 1.14835 112.996 0.986258 113.391C0.824165 113.785 0.742039 114.207 0.744181 114.633V119.766C0.744181 120.624 1.08622 121.447 1.69425 122.053C2.30263 122.659 3.12773 123 3.98817 123H130.994C131.858 122.996 132.685 122.652 133.295 122.043C133.906 121.434 134.251 120.61 134.255 119.749V114.633C134.264 114.199 134.186 113.767 134.023 113.363C133.861 112.959 133.619 112.592 133.312 112.284C133.004 111.975 132.637 111.732 132.233 111.569C131.829 111.405 131.396 111.324 130.96 111.331ZM44.8705 62.4646C34.8768 67.0632 27.0114 75.2778 22.8673 85.4435C22.657 86.048 22.2632 86.5721 21.7402 86.9431C21.2175 87.314 20.5916 87.5136 19.9496 87.5136C19.6047 87.5168 19.262 87.459 18.9371 87.3426C18.1645 87.078 17.5283 86.5189 17.168 85.7877C16.8078 85.0565 16.7528 84.2128 17.0148 83.4417C21.708 71.5261 30.9112 61.9273 42.639 56.7153C43.0532 56.5386 43.5013 56.4543 43.9515 56.4683C44.4017 56.4825 44.8433 56.5943 45.2457 56.7964C45.6477 56.9988 46.0008 57.2859 46.28 57.6386C46.5592 57.991 46.7574 58.4002 46.8613 58.8372C47.0066 59.5784 46.887 60.3471 46.5232 61.0093C46.1597 61.672 45.5749 62.1868 44.8705 62.4646Z" fill={color}/>
                                </svg>
                            </div>

                        </div>
                        <div className="col-sm-12 col-xs-12">
                            <div className={`${style['title-confirmation']}`}>
                                {trans('thank-you-for-order')}
                            </div>
                        </div>
                        <div className="col-sm-12 col-xs-12">
                            <div className={`${style['sub-title-confirmation']}`}>
                                {trans('ship-asap')}
                            </div>
                        </div>
                        <div className="col-sm-12 col-xs-12">
                            <div className={`${style['btn-confirmation']}`} onClick={() => router.push('/self-ordering/products')}>
                                {trans('reorder')}
                            </div>
                        </div>
                    </div>
                </div>
                <IntroBackground position="bottom" color={color} rgbColor={rgbColor}/>
            </div>
        </>
    )
}